
// 常用词汇映射表，用于在无网络/无Key时提供较好的体验
export const OFFLINE_KEYWORD_MAP: Record<string, string> = {
  // --- 基础代词与逻辑词 ---
  '我': '🙋‍♂️', '你': '🫵', '他': '👨', '她': '👩', '它': '📦', '我们': '👥', '你们': '🫵', '他们': '👥',
  '是': '✅', '不是': '❌', '有': '🙆', '无': '🙅', '不': '🚫', '没': '🙅‍♂️',
  '的': '🔗', '和': '➕', '与': '🤝', '或': '🔀', '但': '✋', '因为': '∵', '所以': '∴', '而': '➡️', '乃': '➡️',
  '这': '👇', '那': '👉', '此': '👇', '彼': '👉', '其': '👉', '之': '🔗', '者': '👤',
  
  // --- 方位与空间 ---
  '上': '⬆️', '下': '⬇️', '左': '⬅️', '右': '➡️', '前': '⏩', '后': '⏪', '中': '🎯', '内': '📥', '外': '📤',
  '东': '➡️', '西': '⬅️', '南': '⬇️', '北': '⬆️', '里': '🏠', '边': '📏', '间': '↔️', '处': '📍',
  
  // --- 形容词 ---
  '大': '🐘', '小': '🐜', '多': '📚', '少': '💧', '高': '🦒', '低': '🐁', '长': '📏', '短': '🤏',
  '好': '👍', '坏': '👎', '美': '🌹', '丑': '👹', '快': '🚀', '慢': '🐢', '新': '✨', '旧': '🕸️',
  '远': '🔭', '近': '👓', '鲜': '🐟', '明': '💡', '暗': '🌑', '平': '➖', '乱': '🌀', '迷': '😵',

  // --- 自然与物体 ---
  '日': '☀️', '月': '🌙', '星': '⭐️', '天': '🌌', '地': '🌍', '山': '⛰️', '水': '💧', '火': '🔥', '风': '💨',
  '云': '☁️', '雨': '🌧️', '雪': '❄️', '电': '⚡️', '光': '✨', '气': '💨',
  '树': '🌳', '花': '🌸', '草': '🌿', '叶': '🍃', '果': '🍎', '木': '🪵', '林': '🌲', '竹': '🎋',
  '鱼': '🐟', '鸟': '🐦', '虫': '🐛', '兽': '🦁', '鸡': '🐓', '犬': '🐕', '牛': '🐂', '羊': '🐏',
  '人': '🧑', '心': '❤️', '口': '👄', '手': '✋', '足': '🦶', '目': '👁️', '耳': '👂', '身': '🧘',
  '衣': '👕', '食': '🍚', '住': '🏠', '行': '🚶', '酒': '🍶', '饭': '🍚', '肉': '🥩', '菜': '🥬',
  '房': '🏠', '屋': '🛖', '门': '🚪', '窗': '🪟', '路': '🛣️', '桥': '🌉', '船': '🛶', '车': '🚗',
  
  // --- 动词 ---
  '走': '🚶', '跑': '🏃', '看': '👀', '听': '👂', '说': '🗣️', '想': '🤔', '做': '🔨', '打': '👊',
  '吃': '🍽️', '喝': '🥤', '睡': '😴', '醒': '⏰', '笑': '😄', '哭': '😭', '爱': '❤️', '恨': '💔',
  '来': '📥', '去': '📤', '进': '🚪', '出': '🚶‍♂️', '回': '↩️', '到': '🏁', '起': '🆙', '止': '🛑',
  '买': '💰', '卖': '🏷️', '给': '🎁', '拿': '🤲', '找': '🔍', '丢': '🚮', '死': '💀', '活': '🌱',
  '问': '❓', '答': '💬', '知': '🧠', '识': '💡', '忘': '🌫️', '记': '📝',

  // --- 数字 ---
  '一': '1️⃣', '二': '2️⃣', '三': '3️⃣', '四': '4️⃣', '五': '5️⃣', '六': '6️⃣', '七': '7️⃣', '八': '8️⃣', '九': '9️⃣', '十': '🔟',
  '百': '💯', '千': '1️⃣k', '万': '1️⃣w', '数': '🔢',

  // --- 《桃花源记》专项优化 ---
  '晋': '🏺', '太元': '📅', '武陵': '📍', '捕鱼': '🎣', '业': '💼', 
  '缘': '🔗', '溪': '🌊', '忽逢': '😲', '桃花': '🌸', '夹岸': '🏞️', 
  '杂': '🎨', '芳': '🌺', '落英': '🍂', '缤纷': '🎊', '甚': '❗', '异': '👽', '穷': '🔚',
  '水源': '💧📍', '便': '👉', '得': '🎁', '仿佛': '🌫️', '舍': '🚮', '狭': '🤏', '通': '🚪',
  '豁然': '🌅', '开朗': '😃', '土地': '🏾', '平旷': '⏹️', '俨然': '🏘️', 
  '良田': '🌾', '美池': '⛲', '桑': '🌿', '属': '📦', '阡陌': '🛤️', '交通': '🚦', 
  '相闻': '🔊', '种作': '👨‍🌾', '男女': '👫', '衣着': '👘', '悉': '💯', '如': '≈', 
  '黄发': '🧓', '垂髫': '🧒', '怡然': '😊', '自乐': '🥰', '惊': '😱', '具': '📝', 
  '要': '👋', '还家': '🏡', '设': '🍽️', '杀': '🔪', '作食': '🍳', '村': '🏘️', '咸': '👥', '讯': 'ℹ️',
  '先世': '👴', '避': '🛡️', '秦': '🧱', '率': '🚩', '妻子': '👩‍❤️‍👨', '邑人': '👨‍👩‍👧‍👦', 
  '绝境': '🏞️🚫', '复': '🔁', '焉': '🔚', '遂': '➡️', '间隔': '🚧', '今': '👇', '世': '🌏', 
  '汉': '🇨🇳', '无论': '🚫🗣️', '魏': '🏰', '叹惋': '😔', '延': '👋', '至': '📍', 
  '停': '⏸️', '辞': '👋', '不足': '🚫', '道': '🗣️', '既': '✅', '扶': '🦯', '向': '🔙', 
  '志': '📍', '郡': '🏛️', '诣': '🙇', '太守': '🤠', '遣': '👉', '随': '👣', '寻': '🔍', 
  '刘子骥': '🕵️', '高尚': '🏅', '士': '🎓', '欣然': '🤩', '规': '📅', '未果': '❌', '病': '🤒', '终': '⚰️', '津': '⛴️'
};

// 备用抽象符号库，用于未命中的词汇 (确定性哈希映射)
export const FALLBACK_ICONS = [
  '🟥', '🟧', '🟨', '🟩', '🟦', '🟪', '🟫', '⬛', '⬜', 
  '🔴', '🟠', '🟡', '🟢', '🔵', '🟣', '🟤', '⚫', '⚪',
  '🔶', '🔷', '🔺', '🔻', '💠', '🧿', '🔅', '🔆',
  '♠️', '♣️', '♥️', '♦️', '🎵', '🎶', '〰️', '➰'
];

/**
 * 离线生成 Emoji 算法
 * 1. 查表
 * 2. 包含匹配
 * 3. 哈希映射
 */
export const generateOfflineEmojis = (words: string[]): string[] => {
  return words.map(word => {
    // 1. 精确查表
    if (OFFLINE_KEYWORD_MAP[word]) return OFFLINE_KEYWORD_MAP[word];
    
    // 2. 包含匹配 (如果词中包含关键字)
    for (const key in OFFLINE_KEYWORD_MAP) {
       if (word.includes(key) && key.length > 0) {
         return OFFLINE_KEYWORD_MAP[key];
       }
    }

    // 3. 确定性哈希回退 (保证同一个词生成的图标永远一样)
    let hash = 0;
    for (let i = 0; i < word.length; i++) {
      hash = word.charCodeAt(i) + ((hash << 5) - hash);
    }
    const index = Math.abs(hash) % FALLBACK_ICONS.length;
    return FALLBACK_ICONS[index];
  });
};
