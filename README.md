# MemoQuest - 沉浸式三级输出记忆工具

## 1. 项目简介
MemoQuest 是一款基于脑科学“三级输出”（Three-Level Output）记忆原理开发的辅助背诵 Web 应用。该应用通过游戏化的界面设计和渐进式的文本隐藏算法，帮助用户通过“输出倒逼输入”的方式，快速、高效地记忆长段文字或文章。

核心理念是将背诵过程转化为通关游戏，降低背诵的枯燥感，提高大脑的兴奋度和记忆效率。

## 2. 核心功能与设计

### 2.1 文本输入与处理 (Input Stage)
*   **文本编辑器**：提供沉浸式输入框，支持粘贴任意长度的中文或外文段落。
*   **智能分词**：集成 `Intl.Segmenter` API，对输入文本进行语义级分词，确保隐藏逻辑不会破坏词语的完整性。
*   **字号调节**：支持多级字号动态调节，适应不同用户的阅读习惯。

### 2.2 三级记忆游戏 (Game Stage)
游戏分为三个难度等级，对应记忆深度的层层递进：

*   **Level 1：间隔隐藏 (Interleave)**
    *   **机制**：以词为单位，确定性地交替显示与隐藏（显示一个，隐藏一个）。
    *   **目的**：提供约 50% 的视觉脚手架，帮助建立初步文本脉络。
*   **Level 2：句末隐藏 (End-of-Sentence)**
    *   **机制**：仅保留每一句的开头单词，隐藏句中剩余所有内容直至标点。
    *   **目的**：训练根据句首提示推导完整句子的能力，强化句子结构记忆。
*   **Level 3：仅留段首 (Paragraph Start)**
    *   **机制**：仅保留每个段落的起始单词，隐藏段落内其他所有内容。
    *   **目的**：最高难度挑战，仅靠段首线索回忆全段，达成完全记忆。

### 2.3 交互机制与视觉线索 (Interaction & Visual Clues)
MemoQuest 引入了创新的交互反馈机制，增强记忆钩子：

*   **三段式循环揭示 (3-Stage Reveal Cycle)**
    点击隐藏区域时，状态将在以下三种模式间循环切换：
    1.  **X 占位符 (Placeholder)**: 
        *   默认状态。
        *   **一一对应**：屏幕上 `X` 的数量严格等于被隐藏的字符数量。通过长度暗示帮助用户回想。
    2.  **Emoji 视觉线索 (Visual Clue)**: 
        *   点击 `X` 后显示（若已生成线索）。
        *   显示一个由 AI 生成的、代表该词组含义的 Emoji 图标。
        *   利用**双重编码 (Dual Coding)** 原理，通过图像辅助语义回忆。
    3.  **明文显示 (Revealed Text)**: 
        *   再次点击显示原始文字，用于最终确认。
    
    *循环逻辑*：`[X 占位]` -> `[Emoji 图标]` -> `[明文]` -> `[X 占位]`
    *(注：若未生成 Visual Clues，则直接在占位符与明文间切换)*

*   **AI 智能生成线索**:
    *   集成 **Google Gemini API**，智能分析页面中的隐藏词组。
    *   点击工具栏的 "魔法棒" 图标，AI 将为所有隐藏内容生成语义匹配的 Emoji。

### 2.4 UI/UX 设计
*   **极简图标工具栏**: 
    *   游戏界面的操作按钮（返回、字号、AI线索、原文开关）均采用**纯图标设计**，减少视觉干扰。
    *   **Tooltip 提示**: 鼠标悬停在按钮上时显示具体功能说明。
*   **复古游戏风格**: 
    *   配合像素字体与赛博朋克配色（青/粉/靛蓝），营造沉浸式“探险”氛围。
*   **响应式布局**: 
    *   完美适配桌面端与移动端操作。

## 3. 技术栈

*   **前端框架**: React 19
*   **构建工具**: Vite
*   **开发语言**: TypeScript
*   **样式方案**: Tailwind CSS
*   **图标库**: Lucide React
*   **AI SDK**: @google/genai (Gemini 2.5 Flash)
*   **核心 API**: Intl.Segmenter (原生分词)

## 4. 目录结构

```
/
├── index.html              # 入口 HTML
├── types.ts                # 类型定义 (Token, GameLevel, RevealState)
├── services/
│   └── textProcessor.ts    # 分词与隐藏算法核心
└── components/
    ├── InputStage.tsx      # 输入与设置界面
    ├── GameStage.tsx       # 游戏主界面 (含 AI 线索生成逻辑)
    ├── Button.tsx          # 通用按钮组件
    ├── HelpModal.tsx       # 帮助文档弹窗
    └── FontSizeControl.tsx # 字号控制器
```

## 5. 使用指南

1.  **准备**: 在首页输入或粘贴需要背诵的文本（支持一键加载示例）。
2.  **Level 1**: 开始游戏。遇到记不住的词，点击 `X` 占位符。
    *   如果不确定，可以先看一眼 AI 生成的 Emoji 线索（需先点击魔法棒生成）。
    *   再点一次查看原文。
3.  **进阶**: 熟练后点击顶部数字切换到 Level 2 或 Level 3。
4.  **辅助**: 随时使用 "眼睛" 图标查看/隐藏全文，或调整字号。
